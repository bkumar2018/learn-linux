
Wherever required, use sudo to run commands as the 
root user. Bob's password is caleston123.

sudo iptables -L -v -n
This command provides a detailed list of all active rules:

-L lists all chains (INPUT, FORWARD, OUTPUT).
-v shows verbose output, including packet and byte counters for each rule.
-n displays IP addresses and port numbers numerically to avoid DNS lookups.


Q:
To add incoming rules for SSH and HTTP on devapp01, you can use iptables or firewalld, depending on your setup.

A:
SSH Rule
sudo iptables -A INPUT -p tcp -s 172.16.238.187 --dport 22 -j ACCEPT

HTTP Rule
sudo iptables -A INPUT -p tcp -s 172.16.238.187 --dport 80 -j ACCEPT



Show iptables:
----------------
bob@devapp01:~$ 
bob@devapp01:~$ sudo iptables -L  -v -n
Chain INPUT (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         
   82  5640 ACCEPT     tcp  --  *      *       172.16.238.187       0.0.0.0/0            tcp dpt:22
    0     0 ACCEPT     tcp  --  *      *       172.16.238.187       0.0.0.0/0            tcp dpt:80

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 6 packets, 720 bytes)
 pkts bytes target     prot opt in     out     source               destination         
bob@devapp01:~$ 

Q:
Drop incoming connections from any source on any destination port for any protocol (TCP/UDP).
A:
bob@devapp01:~$ sudo iptables -A INPUT -p tcp -j DROP
bob@devapp01:~$ sudo iptables -A INPUT -p udp -j DROP

bob@devapp01:~$ sudo iptables -L  -v -n
Chain INPUT (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         
  140  9760 ACCEPT     tcp  --  *      *       172.16.238.187       0.0.0.0/0            tcp dpt:22
    0     0 ACCEPT     tcp  --  *      *       172.16.238.187       0.0.0.0/0            tcp dpt:80
    0     0 DROP       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           
    0     0 DROP       udp  --  *      *       0.0.0.0/0            0.0.0.0/0           

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 7 packets, 888 bytes)
 pkts bytes target     prot opt in     out     source               destination         

 Q:
 On devapp01, add an outgoing rule permitting access to port 5432 on devdb01 and HTTP access to caleston-repo-01. Once this is done, block outgoing traffic to any destination on http/https ports from devapp01

 A:
 bob@devapp01:~$ sudo iptables -A OUTPUT -p tcp -d devdb01 --dport 5432 -j ACCEPT
bob@devapp01:~$ 
bob@devapp01:~$ sudo iptables -A OUTPUT -p tcp -d caleston-repo-01 --dport 80 -j ACCEPT
bob@devapp01:~$ 
bob@devapp01:~$ sudo iptables -A OUTPUT -p tcp --dport 80 -j DROP
bob@devapp01:~$ sudo iptables -A OUTPUT -p tcp --dport 443 -j DROP
bob@devapp01:~$ 
bob@devapp01:~$ sudo iptables -L  -v -n
Chain INPUT (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         
  187 13120 ACCEPT     tcp  --  *      *       172.16.238.187       0.0.0.0/0            tcp dpt:22
    0     0 ACCEPT     tcp  --  *      *       172.16.238.187       0.0.0.0/0            tcp dpt:80
    0     0 DROP       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           
    0     0 DROP       udp  --  *      *       0.0.0.0/0            0.0.0.0/0           

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 12 packets, 1528 bytes)
 pkts bytes target     prot opt in     out     source               destination         
    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            172.16.238.11        tcp dpt:5432
    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            172.16.238.15        tcp dpt:80
    0     0 DROP       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:80
    0     0 DROP       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:443
bob@devapp01:~$ 
